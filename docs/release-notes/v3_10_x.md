---
sidebar_position: -310
---

# v3.10.x

## v3.10.8

date: 2023-12-08

本次发布为3.10发布以来最重要小版本发布，包含三项重大更新。

1. 虚拟机部署方式改为采用轻量虚拟机模式。本地私有云部署虚拟机时通过启动轻量虚拟机挂载虚拟机磁盘，实现对虚拟机磁盘操作系统识别和配置文件初始化。相比原来通过宿主机nbd内核模块挂载虚拟机磁盘进行部署的方式，摆脱了对宿主机内核的依赖，解决在宿主机环境上LVM资源冲突的问题，明显提高虚拟机部署的可靠性。
2. 将默认监控存储从Influxdb替换为VictoriaMetrics，后者在响应速度和存储空间等方面都有更优异的表现。
3. 支持将纳管的Cloudpods虚拟机迁移到内置私有云平台，方便多个Cloudpods集群的合并整合。

同时，我们对文档的基础框架进行了升级，将文档迁移到更加现代化的 docusaurus 来构建。新版本的文档已经可通过 [https://v2.cloudpods.org](https://v2.cloudpods.org) 预览。等新版文档内容完善后，将把Cloudpods文档站点URL切换到新版。

### 功能优化 (Enhancements)

- 【主机】使用轻量虚机方式替换 nbd 挂载的部署方式
- 【主机】优化虚拟机镜像排序及过滤
- 【多云】云账号只读模式模式支持资源标签单向同步
- 【多云】Zstack支持同步共享存储
- 【多云】PVE平台虚拟机支持打开VNC

### 问题修复 (Fixes)

- 【主机】修复主机列表导出失败问题
- 【主机】修复主备机切换host-agent panic的问题
- 【主机】修复 SR-IOV 网卡热插拔失败的问题
- 【主机】修复 SR-IOV 网卡监控数据获取不准确的问题

### 新功能 (New Features)

- 【主机】支持纳管Cloudpods主机迁移到本地
- 【监控】支持使用 VictoriaMetrics 作为监控后端

:::tip
- 为了避免升级导致的服务中断，v3.10.8只会默认部署VictoriaMetrics，但不默认启用。需要参考： [从 Influxdb 手动迁移切换到VictoriaMetrics](../operations/monitoring/migrating-to-vm)。从3.11开始将默认启用VictoriaMetrics。
- 虚拟机部署方式默认采用轻量虚拟机方式，但原有采用nbd方式的虚拟机部署方式也依然保留，可以通过修改配置切换回去。
:::

### CHANGELOG

具体变更请参考: [CHANGELOG v3.10.8](../development/changelog/release-3_10/3-10-8)。

## v3.10.7

date: 2023-11-08

本次发布，重点是对已有功能的优化和修复，本次重点对接了社区反馈较多的天翼云新版本，由于之前对接是旧版接口，导致用户使用问题较多。 本次接口已切换为天翼云最近版本，使用上更加方便。

同时本次在部署上进行了优化，新支持了基于Ubuntu 22.04发行版部署，同时部署脚本根据用户使用场景进行了区分，支持使用virt（私有云）, cmp（多云管理）和 full（融合云）三种部署方式，用户可结合自己实际使用场景进行选择，进而可提高资源的使用率。

场景不涉及功能均会进行隐藏，具体更新内容如下。

### 功能优化 (Enhancements)

- 【主机】支持关机状态一键安装监控 Agent
- 【主机】KVM 虚拟机支持指定磁盘限速
- 【主机】支持项目管理员进行续费和自动续费操作
- 【主机】KVM虚拟机单盘大小默认限制降为10T
- 【主机】回收站资源支持查看操作日志
- 【主机】精简 host-deployer 容器镜像
- 【主机】支持 VMware 在线调整配置及扩容磁盘
- 【多云】资源支持基于到云订阅同名项目
- 【多云】支持天翼云支持新版本接口
- 【系统】优化CPU性能，降低系统负载。
- 【报表】项目报表增加归属域的信息（企业版）
- 【部署】部署脚本优化，提供 virt（私有云）, cmp（多云管理）和 full（融合云）三种部署方式
- 【部署】ocboot run.py 支持不写本地部署机器 ip ，自动配置 ssh 免密登录
- 【部署】添加参数支持 pip mirror ，加快国内安装 ansible 等 python 包的速度
- 【部署】升级 grafana 到 7.5.17 ，方便服务日志搜索

### 问题修复 (Fixes)

- 【主机】修复 KVM 虚拟机无法修改启动顺序问题
- 【主机】修复 VMware 虚拟机可能删除失败问题
- 【主机】修复平台版本差异导致迁移失败问题
- 【主机】修复历史套餐数据残留问题
- 【主机】修复龙蜥发行版镜像没有识别的问题
- 【主机】修复周期性频繁刷新调度器缓存问题
- 【主机】修复重装系统后根据镜像无法更新虚机引导方式的问题
- 【主机】修复 SR-IOV 网卡调度失败问题
- 【主机】修复重装系统使用 UEFI 镜像 bios参数没有更新的问题
- 【主机】修复某些虚拟机操作系统 DHCP 返回 hostname 不兼容的问题
- 【裸金属】修复因为 QGA 部署导致物理机装机失败的问题
- 【列表】修复列表资源名称修改必填校验丢失问题
- 【列表】修复导出可能导致的数据不全问题
- 【调度】修复尽量使用和避免使用调度器逻辑不正确的问题
- 【容器】修复容器新建定时任务报错问题
- 【容器】修复导入集群失败的问题
- 【多云】修复基于docker compose 部署，云上子账号无法同步的问题

### 新功能 (New Features)

- 【部署】支持基于 Ubuntu 22.04 x86_64 版本部署平台
- 【主机】支持 rocky linux 镜像创建虚拟机
- 【主机】虚拟机列表IP支持正则表达式过滤
- 【工单】工单审批支持机器人、webhook 类型通知（企业版）

### CHANGELOG

具体变更请参考: [CHANGELOG v3.10.7](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-7/)。

## v3.10.6

date: 2023-10-10

本期发布中，前端优化了静态资源的加载机制，将页面打开前需加载的静态资源包从80MB缩减为2MB，首页加载速度有明显提升。另外值得一提的是开源之夏 chentianxiang 同学的#【17600通过QGA修改运行时虚拟机的网络设置】成功合并，解决了困扰已久的修改虚拟机网卡后不能可靠重启虚拟机网络生效的问题。

同时本期改进很多社区反馈问题，例如支持新建KVM主机时设置主机自动启动，修复桌面操作系统主机初始账号为root导致无法正常登录，修复华为云region同步异常等问题。

以下为本期发布的主要改进，修复和新功能。

### 功能优化 (Enhancements)

- 【主机】主机运行时更换IP后，通过Qemu Guest Agent重新配置主机网络，提升操作成功率
- 【主机】镜像上传后，如果平台已经纳管了 VMware 才会自动转换生成 vmdk 镜像，否则不生成
- 【主机】取消迁移状态优化，展示虚拟机实际状态
- 【主机】支持新建 KVM 磁盘指定块存储
- 【前端】分离前端js及预加载静态资源（如字体等），提高前端页面加载速度
- 【主机】支持新建 KVM 主机设置自动启动
- 【主机】支持 VMware 一键创建相同配置
- 【主机】KVM 和 VMware 重装系统安装监控 agent
- 【主机】优化关联 GPU 逻辑，vGPU与物理 GPU 互斥
- 【认证】支持取消已颁发token，删除用户或access key时同时取消对应的有效token
- 【工单】支持定义虚拟机重启和关机工单类型（企业版）
- 【工单】优化查询速度（企业版）
- 【巡检】优化自动巡检中针对高可用的检查逻辑（企业版）

### 问题修复 (Fixes)

- 【主机】修复保存镜像可能会出现重启失败问题
- 【主机】修复插入 ISO 后详情页显示名称不正确的问题
- 【主机】修复 vGPU 热插拔相关问题
- 【多云】修复修改本地项目和云上项目映射关系显示问题
- 【主机】修复资源导出部分标签无法导出问题
- 【主机】修复vmware实例hostname截断问题
- 【主机】修复部分信创桌面操作系统初始化账号是root导致无法正常登录
- 【多云】修复修改本地项目和云上项目映射关系显示问题
- 【多云】修复纳管创建cloudpods实例失败问题
- 【多云】修复华为云region同步异常问题
- 【多云】修复删除云账号数据库死锁问题
- 【监控】修复自动迁移选择目标宿主机时会出现 panic 的问题
- 【调度】修复子网没有及时刷新，导致调度失败的问题
- 【部署】修复命令行通过 feature-config 打开或者关闭一些功能会被重置的问题
- 【容器】修复 k8s 集群同步资源的时候会偶尔出现同步失败的问题

### 新功能 (New Features)

- 【容器】支持容器镜像仓库

### CHANGELOG

- [CHANGELOG v3.10.6](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-6/)

## v3.10.5

date: 2023-09-08

### 功能优化 (Enhancements)

- 【主机】支持 vmware主机名称和标签双向同步
- 【主机】支持更新GPU透传设备的设备类型
- 【主机】支持新建KVM主机硬盘同时指定块存储
- 【认证】支持消息订阅设置消息静默期
- 【容器】支持更新 K8s 集群 kubeconfig
- 【容器】支持纳管只读权限的k8s集群
- 【多云】云账号纳管后并发同步云账号相关sku数据，提高云账号同步速度
- 【部署】部署增加检查，确保使用 python3 执行 py 脚本

### 问题修复 (Fixes)

- 【主机】修复系统盘和数据盘过滤逻辑不一致问题
- 【主机】修复虚拟机添加网卡网络参数错误问题
- 【主机】修复虚拟机修改安全组状态显示异常问题
- 【主机】修复切换镜像磁盘大小范围错误问题
- 【主机】修复国产海光CPU宿主机无法正常启动Windows 7等版本Windows虚拟机的问题
- 【主机】修复未能正确识别Debian 12 Cloud Image镜像
- 【主机】修复Windows 2022虚拟机未正确设置DNS服务器地址问题
- 【网络】修复DNS解析同步异常问题
- 【主机】修复 3D 类型 GPU 设备探测失败的问题
- 【主机】修复 lvm 磁盘批量创建部署失败以及 vg deactive 失败的问题
- 【工单】修复工单通知和邮件发送异常问题
- 【主机】修复部分场景vmware虚拟机删除失败的问题
- 【部署】修复 docker compose 部署的环境 cloudshell 无法登陆的问题

### 新功能 (New Features)

- 【主机】支持集成堡垒机（jumpserver），创建虚拟机时自动同步记录到堡垒机（企业版）
- 【主机】支持平台新建虚拟机时设置自定义数据（UserData）
- 【主机】支持虚拟机vGPU 透传，包括AMD和Nvidia的vGPU
- 【容器】支持在 Aws 上自建 K8s 集群，集成 VPC CNI、CSI 和 LB Controller 等插件
- 【部署】支持以指定的非root用户执行ocboot脚本部署平台
- 【部署】支持部署只包含私有云（参数为edge）或云管（参数为cmp）功能的集群

### CHANGELOG

- [CHANGELOG v3.10.5](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-5/)

## v3.10.4

date: 2023-08-01

### 功能优化 (Enhancements)

- 【主机】支持PVE新建
- 【费用】优化阿里云账单资源类型名称（企业版）
- 【主机】选择vmware平台镜像，磁盘支持容量变更
- 【主机】在线修改密码需要先探测QGA状态
- 【主机】热迁移取消”快速收敛“选项，默认开启快速收敛
- 【容器】导入容器集群支持指定域
- 【认证】新建webhook机器人支持输入更多参数
- 【部署】debian11兼容设置gpu和大页
- 【监控】grafana 管理员密码设置成随机密码
- 【多云】公有云region下线自动清理相关资源
- 【多云】优化云账号删除速度

### 问题修复 (Fixes)

- 【费用】修复阿里云税前金额缺失问题（企业版）
- 【费用】修复AWS找不到账单文件问题（企业版）
- 【费用】修复无法按标签筛选资源账单问题（企业版）
- 【控制面板】修复vpc磁贴、云账号状态磁贴数据错误问题
- 【多云】修复云订阅过滤项目失效问题
- 【监控】修复grafana没有禁用匿名登陆问题
- 【宿主机】修复telegraf执行smartctl可能出现僵尸进程的问题
- 【调度】修复子网设置了自动分配但没有生效的问题
- 【部署】修复operator停止服务没有完全生效的问题
- 【主机】debian 启动虚机 python 路径问题
- 【主机】非 /opt/cloud 存储容量上报为根分区容量问题
- 【主机】arm架构镜像被识别为x86_32问题

### 新功能 (New Features)

- 【多云】云账号同步支持屏蔽资源类型
- 【主机】mlx cx6 ovs offload 支持 vpc 网络
- 【报表】报表订阅支持项目日报（企业版）

### CHANGELOG

- [CHANGELOG v3.10.4](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-4/)

## v3.10.3

date: 2023-06-30

### 功能优化 (Enhancements)

- 【主机】ssh登陆支持密码检查
- 【主机】webssh基于websocket协议
- 【主机】支持vmware迁移仅迁移计算
- 【主机】支持添加 lvm vg 作为后端存储
- 【月报】月报适应不同账单币种
- 【多云】新建vmware云账号时，新增用户配置网络指引
- 【系统】优化提示权限不足展示问题

### 问题修复 (Fixes)

- 【主机】修复ZStack虚拟机ip同步问题
- 【主机】修复虚拟机添加备份机不支持开机的问题
- 【主机】修复驱动反显错误的问题
- 【主机】修复物理机上传电源和温度指标可能出现panic的问题
- 【主机】修复卸载磁盘重复回调的问题
- 【多云】修复阿里云弹性缓存周期同步问题
- 【系统】修复列表无分页限制问题
- 【报表】修复月报通知角色展示为操作用户的问题（企业版）
- 【多云】修复华三云磁盘创建时间问题（企业版）
- 【多云】修复OpenStack快照状态不刷新问题
- 【多云】修复阿里云国际版账号获取余额失败问题
- 【容器】修复k8s集群创建ceph storageclass出错问题
- 【镜像】修复uos镜像识别成ubuntu的问题
- 【网络】vpcagent 回退到从 region 服务拉取源信息，解决偶发出现的网络不通问题

### 新功能 (New Features)

- 【认证】支持用户在个人中心查看消息订阅
- 【容器】Helm release 实例前端支持升级与回滚
- 【关于】增加平台升级记录（企业版）
- 【巡检】巡检报告支持下载（企业版）

### CHANGELOG

- [CHANGELOG v3.10.3](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-3/)

## v3.10.2

date: 2023-06-01

### 功能优化 (Enhancements)

- 【主机】PCIe 机型支持透传设备热插拔操作
- 【镜像】通过文件上传ISO镜像支持选择镜像类型
- 【巡检】优化巡检报告标题显示（企业版）
- 【主机】宿主机开启大页后，禁止调整内存超售比及预留内存大小
- 【网络】内置负载均衡增加优先级及网口字段
- 【巡检报告】报告输出格式优化（企业版）
- 【主机】arm虚拟机功能改进：支持不停机拔插iso设备，修正3.9升级3.10兼容性问题
- 【主机】获取宿主机拓扑结构兼容 arm 宿主机
- 【主机】arm 宿主机支持使用 TCG 模式启动虚机
- 【主机】虚拟机不再默认打开 kvm=off  的选项，只对有透传设备的虚机打开该选项

### 问题修复 (Fixes)

- 【多云】修复部分平台Redis标签不同步问题
- 【主机】修复主机hostname存在空格导致重启失败问题
- 【容器】修复K8s集群新建磁盘报错的问题
- 【容器】修复 helm release 升级不生效的问题
- 【主机】修复虚机删除时报 ‘Stage Complete Not Found’ 的问题
- 【主机】修复 virtio 磁盘驱动热插拔失败的问题
- 【主机】修复 cdrom 启动顺序的问题
- 【主机】修复3.9升级到3.10的一些不兼容性问题
- 【主机】修复虚机包含快照迁移失败的问题
- 【主机】修复虚机修改ip后重启网络未生效的问题

### 新功能 (New Features)

- 【认证】品高云OAuth认证源支持
- 【主机】支持自定义PCI透传设备的透传
- 【主机】Openstack平台快照支持回滚
- 【报表】月报报表支持订阅发送（企业版）
- 【网络】增加apimap服务，为vpcagent等提供网络信息，卸载region控制器压力
- 【容器】支持部署 K8s 1.22 版本

### CHANGELOG

- [CHANGELOG v3.10.2](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-2/)

## v3.10.1

date: 2023-05-05

### 功能优化 (Enhancements)

- 【认证】项目管理员支持选择用户
- 【认证】用户手机号格式兼容
- 【费用】费用总览柱状图样式优化
- 【主机】虚拟机转换失败状态文案优化中文
- 【主机】磁盘同步限制优化降低至300
- 【存储】优化存储列表查询速度
- 【安装部署】优化kernel检测与重启的逻辑
- 【UI】安全组优化增加校验提示信息

### 问题修复 (Fixes)

- 【主机】修复物理机ssh信息重复问题
- 【主机】修复虚拟机描述信息缺少cdrom配置问题
- 【主机】修复热迁移带宽不限制设置未生效的问题
- 【网络】修复安全组同步问题
- 【认证】修复企业微信token过期问题

### CHANGELOG

- [CHANGELOG v3.10.1](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-1/)

## v3.10.0

date: 2023-04-26

### 新功能 (New Features)

- 【报表】新增报表模块（企业版）
- 【多云】华为 HCS 平台对接（企业版）
- 【多云】浪潮超融合平台对接（企业版）
- 【多云】华三 CloudOS 平台对接（企业版）
- 【多云】Proxmox 平台对接
- 【主机】KVM 平台大页内存虚拟机支持
- 【主机】KVM 宿主机 CPU 预留支持
- 【主机】KVM 支持 SR-IOV 网卡透传
- 【主机】host desc 结构化
- 【主机】QEMU pcie 热插拔
- 【主机】GPU卡支持热操作
- 【主机】KVM 主机支持指定启动顺序
- 【主机】KVM 主机新建支持安装监控 Agent
- 【主机】KVM 主机支持更换磁盘块存储
- 【计费】支持包年包月/预留实例费用均摊（企业版）
- 【计费】支持未归属项目费用分摊（企业版）
- 【计费】多维度分子增加主账号和子账号分析（企业版）
- 【系统】支持一键巡检同步生成巡检报告（企业版）
- 【多云】腾讯云 CDN 支持新建
- 【多云】vmware 平台迁移支持
- 【多云】阿里云表格存储对接
- 【多云】云账号支持绑定基于标签归属的同步策略
- 【容器】麒麟容器部署支持
- 【容器】纳管支持高版本容器集群支持
- 【部署】支持 docker compose 部署 CMP

### 功能优化 (Enhancements)

- 【面板】数字图样式及使用率面板样式优化（企业版）
- 【主机】主备机优化
- 【主机】宕机自动迁移优化
- 【主机】KVM 虚拟机支持指定启动系统盘
- 【主机】KVM 虚拟机增加 power_status 的字段
- 【系统】全局搜索增加云上 ID
- 【监控】告警接受人支持指定角色告警
- 【多云】Cloudpods 纳管监控数据改进
- 【认证】密码过期用户支持登录修改密码
- 【认证】对接华为云短信服务
- 【认证】权限设置更细化，支持资源操作粒度设置（企业版）

### CHANGELOG

- [CHANGELOG v3.10.0](https://www.cloudpods.org/zh/docs/development/changelog/release-3.10/3-10-0/)
