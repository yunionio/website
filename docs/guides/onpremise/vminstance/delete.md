---
sidebar_position: 4
---

# 删除虚拟机

## 前端操作

### 设置删除保护

该功能用于设置虚拟机的删除保护。当虚拟机启用删除保护后，虚拟机无法被删除；当虚拟机禁用删除保护后，虚拟机才可以被删除。

1. 禁用删除保护：
    - 单击虚拟机名称右侧带有![](/img/docs/getting-started/delprotect1.png)图标时，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除-设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"禁用"删除保护，单击 **_"确定"_** 按钮。
2. 启用删除保护：
    - 当虚拟机名称右侧不带![](/img/docs/getting-started/delprotect1.png)图标时，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除-设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"启用"删除保护，单击 **_"确定"_** 按钮。


### 删除

该功能用于删除虚拟机，当虚拟机名称项右侧有![](/img/docs/getting-started/delprotect1.png)图标，表示该虚拟机启用了删除保护，无法删除虚拟机。如需要删除虚拟机，则需要先禁用删除保护再删除虚拟机。

:::tip
- 删除的虚拟机会放到回收站，如果想侧低删除虚拟机，需要在回收站里面再删除一次。
- 若虚拟机所在的宿主机状态异常，即使禁用删除保护也无法删除虚拟机。
- 若宿主机已经下线无法恢复时，需要管理员在控制节点使用climc的server-purge命令删除虚拟机记录。可参考[清楚虚拟机记录](./purge)。
:::

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除-删除"_** 菜单项，弹出操作确认对话框。
2. 支持勾选“同时删除快照”、“同时删除后挂载的数据盘”、“同时删除EIP”等。
3. 单击 **_"确定"_** 按钮，完成操作。

## climc操作

### 解除删除保护

```bash
$ climc server-update --delete enable <server_id>
```

### 删除

```bash
# 删除至回收站
$ climc server-delete <server_id>

# 不到回收站，直接删除
$ climc server-delete -f <server_id>
```
